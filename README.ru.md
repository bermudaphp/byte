# Класс Byte

*Read this in other languages: [English](README.md)*

## Обзор

`Byte` — это надежный PHP-класс, предназначенный для работы с единицами измерения данных (байты, килобайты, мегабайты и т.д.). Он предоставляет полный набор методов для конвертации, сравнения, арифметических операций и форматирования в удобочитаемом виде.

## Возможности

- **Конвертация единиц измерения**: Легко преобразуйте данные между различными единицами (B, kB, MB, GB, TB, PB, EB, ZB, YB)
- **Арифметические операции**: Выполняйте сложение, вычитание, умножение, деление и операции по модулю
- **Сравнение**: Сравнивайте значения байтов с поддержкой как индивидуальных, так и массовых сравнений
- **Форматирование**: Форматируйте значения байтов в удобочитаемые строки
- **Операции с диапазонами**: Создавайте диапазоны значений, находите мин/макс, вычисляйте средние значения
- **Расчет времени передачи**: Оценивайте время передачи данных на основе пропускной способности

## Установка

Вы можете установить пакет через composer:

```bash
composer require bermudaphp/byte
```

## Использование

### Создание экземпляров Byte

Существует несколько способов создания экземпляра `Byte`:

```php
use Bermuda\Stdlib\Byte;

// Из числового значения (байты)
$bytes = new Byte(1024);

// Из строки
$bytes = new Byte('1024 kB');

// Использование статических фабричных методов
$bytes = Byte::new(1024);
$bytes = Byte::kb(1024); // 1024 килобайта
$bytes = Byte::mb(50);   // 50 мегабайт
$bytes = Byte::gb(2);    // 2 гигабайта

// Из человекочитаемой строки
$bytes = Byte::fromHumanReadable('2.5 GB');

// Из битов
$bytes = Byte::fromBits(8192); // 1024 байта
```

### Конвертация в различные единицы измерения

```php
$bytes = new Byte(1536);

// Конвертация в человекочитаемую строку
echo $bytes->toString(); // "1.5 kB"

// Конвертация в определенные единицы
echo $bytes->toKb();  // "1.5 kB"
echo $bytes->toMb();  // "0.0015 MB"
echo $bytes->toGb();  // "0.000001 GB"

// Настройка формата
echo $bytes->to('kb', 3, '_'); // "1.500_kB"

// Получение чистого значения в конкретной единице
$kbValue = $bytes->getValue('kb'); // 1.5
```

### Операции сравнения

Класс поддерживает как сравнение с одиночными значениями, так и с множественными значениями в двух режимах:
- `MODE_ALL`: Возвращает true, только если условие верно для всех значений
- `MODE_ANY`: Возвращает true, если условие верно хотя бы для одного значения

```php
$bytes = Byte::kb(1024); // 1 MB

// Сравнение с одним значением
$bytes->equalTo('1 MB');        // true
$bytes->greaterThan('900 kB');  // true
$bytes->lessThan('1.1 MB');     // true

// Сравнение с несколькими значениями
$bytes->greaterThan(['900 kB', '1.1 MB'], Byte::MODE_ANY); // true
$bytes->greaterThan(['900 kB', '1.1 MB'], Byte::MODE_ALL); // false

// Другие методы сравнения
$bytes->lessThanOrEqual('1 MB');                    // true
$bytes->greaterThanOrEqual(['1 MB', '1024 kB']);    // true
$bytes->between('900 kB', '1.1 MB');                // true
$bytes->inRanges([['500 kB', '800 kB'], ['1 MB', '1.5 MB']]); // true
```

### Арифметические операции

```php
$bytes = Byte::mb(1);

// Сложение
$newBytes = $bytes->increment('500 kB'); // 1.5 MB

// Вычитание
$newBytes = $bytes->decrement('512 kB'); // ~0.5 MB

// Деление
$newBytes = $bytes->divide(2); // 512 KB

// Умножение
$newBytes = $bytes->multiply(3); // 3 MB

// Остаток от деления
$newBytes = $bytes->modulo('512 kB'); // 0

// Абсолютное значение
$newBytes = (new Byte(-1024))->abs(); // 1024 байта

// Минимум/Максимум
$newBytes = $bytes->max('1.5 MB'); // 1.5 MB
$newBytes = $bytes->min(['2 MB', '500 kB']); // 500 kB
```

### Статические операции над коллекциями

```php
// Создание диапазона
$range = Byte::range('1 MB', '5 MB', '1 MB'); // [1 MB, 2 MB, 3 MB, 4 MB, 5 MB]

// Вычисление суммы
$sum = Byte::sum(['1 MB', '2 MB', '500 kB']); // 3.5 MB

// Вычисление среднего
$avg = Byte::average(['1 MB', '2 MB', '3 MB']); // 2 MB

// Поиск максимума/минимума
$max = Byte::maximum(['1 MB', '500 kB', '2 GB']); // 2 GB
$min = Byte::minimum(['1 MB', '500 kB', '2 GB']); // 500 kB
```

### Конвертация битов

```php
$bytes = new Byte(1024);

// Конвертация в биты
$bits = $bytes->toBits(); // 8192

// Создание из битов
$bytes = Byte::fromBits(8192); // 1024 байта
```

### Расчет времени передачи

```php
$fileSize = Byte::gb(1);
$bandwidth = Byte::mb(10); // 10 MB/s

// Вычисление времени передачи в секундах
$seconds = $fileSize->getTransferTime($bandwidth); // 102.4 секунды

// Получение отформатированного времени передачи
$time = $fileSize->getFormattedTransferTime($bandwidth); // "1 минута, 42 секунды"
```

### Форматирование байтовых значений

```php
// Форматирование значений байтов для удобочитаемости
echo Byte::humanize(1536);             // "1.5 kB"
echo Byte::humanize(1536, 3);          // "1.500 kB"
echo Byte::humanize(1536, 2, '_');     // "1.5_kB" 
```

### Проверка состояния

```php
$bytes = new Byte(1024);

$bytes->isZero();      // false
$bytes->isPositive();  // true
$bytes->isNegative();  // false
```

## Обработка ошибок

Класс выбрасывает исключения в следующих ситуациях:

- `\InvalidArgumentException`: При парсинге недопустимых форматов строк или использовании неподдерживаемых единиц измерения
- `\LogicException`: При попытке уменьшить значение на величину, большую текущего значения
- `\DivisionByZeroError`: При попытке деления на ноль

## Лицензия

Этот пакет является программным обеспечением с открытым исходным кодом, лицензированным под [лицензией MIT](LICENSE.md).
